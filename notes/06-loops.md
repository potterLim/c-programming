# 6. 반복문 (Loops)

프로그래밍에서 반복문은 같은 작업을 여러 번 반복할 때 사용한다.  
같은 작업을 여러 번 반복할 수 있도록 하여 코드의 효율성과 가독성을 높여준다.

반복문이 없으면 동일한 코드를 여러 줄 복사해서 써야 하므로 유지보수에 불리하다.  
C 언어는 대표적으로 `while`, `do-while`, `for` 세 가지 반복문을 제공한다.

## while 문

`while` 문은 조건이 참인 동안 반복해서 실행된다.

```c
while (조건식) {
    // 반복 실행할 코드
}
```

### 예시: 비밀번호가 맞을 때까지 계속 입력 받기

```c
int password = 1234;
int input = 0;

while (input != password) {
    printf("비밀번호를 입력하세요: ");
    scanf("%d", &input);
}
printf("접속 성공!\n");
```

조건을 먼저 검사하므로 처음부터 조건이 거짓이면 한 번도 실행되지 않는다.

### 예시:
```c
int count = 0;

while (count < 3) {
    printf("반복 중입니다: %d\n", count);
    ++count;
}
```

## do-while 문

`do-while` 문은 조건을 나중에 검사하므로 무조건 한 번은 실행된다.

```c
do {
    // 반복 실행할 코드
} while (조건식);
```

### 예시: 최소 한 번은 숫자를 입력받고, 양수를 입력할 때까지 반복

```c
int number;

do {
    printf("양수를 입력하세요: ");
    scanf("%d", &number);
} while (number <= 0);

printf("입력한 양수: %d\n", number);
```

## for 문

`for` 문은 초기식, 조건식, 증감식 세 부분으로 구성되며 반복 횟수가 명확히 정해져 있을 때 사용하기 좋다.  


```c
for (초기식; 조건식; 증감식) {
    // 반복 실행할 코드
}
```

### 실행순서
1. 초기식 - 반복 시작 시 딱 한 번 실행
2. 조건식 검사 - 거짓이면 즉시 반복 종료
3. 본문 실행
4. 증감식 실행 - 다음 반복을 위한 값 변경
5. 2로 이동

### 동작 시뮬레이션 예시

```c
for (int i = 0; i < 3; ++i) {
    printf("%d\n", i);
}
```

위의 코드는
```
0
1
2
```
를 순서대로 출력한다.

반복 흐름을 단계별로 추적하면:

* 시작: 초기식 `int i = 0;` (한 번만 실행)

| 단계 | 조건 검사 직전의 i | 조건식 `i < 3` | 본문에서 `printf`로 출력 | 증감식 실행 후 i |
| :--: | :----------------: | :------------: | :----------------------: | :--------------: |
|  1   |      0             |      참        |         0                |          1       |
|  2   |      1             |      참        |         1                |          2       |
|  3   |      2             |      참        |         2                |          3       |
| 종료 |      3             |      거짓      |    (본문 실행 안 함)     |          -       |

* 마지막 검사에서 `i`가 3이 되어 `3 < 3`이 거짓이므로 반복을 종료한다.

### 예시: 5명의 학생에게 퀴즈 점수 입력받고 평균 점수 계산하기

```c
int score;
int total_score = 0;
int i;

for (i = 0; i < 5; ++i) {
    printf("%d번째 학생의 점수를 입력하세요: ", i + 1);
    scanf("%d", &score);
    total_score += score;
    printf("%d번째 학생 점수 등록 완료!\n", i + 1);
}

double average = total_score / (double)i;
printf("전체 학생 평균 점수: %.2f점\n", average);
```

> 실행 문장이 한 줄뿐일 경우 중괄호 `{}`를 사용하지 않아도 프로그램 동작에는 문제가 없지만 실수로 인한 버그를 예방하기 위해 반드시 중괄호 `{}`를 사용할 것.

## 반복 제어문: `break`, `continue`

- `break`: 반복문을 즉시 종료
- `continue`: 아래 코드를 건너뛰고 다음 반복으로 이동(`for`문의 경우 증감식으로 이동하여 실행한 후 조건식을 검사)

### 예시: 0이 입력되면 반복 종료

```c
int input;

while (1) {
    printf("숫자를 입력하세요 (0을 입력하면 종료): ");
    scanf("%d", &input);

    if (input == 0) {
        break;
    }

    printf("입력한 숫자: %d\n", input);
}
```

### 예시: 양수들의 합 출력

```c
int number;
int sum = 0;

for (int i = 0; i < 5; ++i) {
    printf("%d번째 숫자를 입력하세요: ", i + 1);
    scanf("%d", &number);

    if (number < 0) {
        printf("음수는 건너뜁니다.\n");
        continue;
    }

    sum += number;
}

printf("양수의 합: %d\n", sum);
```

## 중첩 반복문

반복문 안에 또 다른 반복문이 들어간 형태를 말한다.  
주로 표 형태, 2차원 배열 등을 처리할 때 사용된다.

```c
for (int i = 0; i < row; ++i) {
    for (int j = 0; j < col; ++j) {
        // 반복 실행할 코드
    }
}
```

- 전체 반복 횟수는 `row * col`번이다.
- 일반적으로 `i`는 행(row), `j`는 열(column)을 의미한다.

### 예시: 0\~2행, 0\~1열 위치 출력

```c
int row = 3;
int col = 2;

for (int i = 0; i < row; ++i) {
    for (int j = 0; j < col; ++j) {
        printf("(%d행, %d열)\n", i, j);
    }
}
```

### 중첩 반복문에서 반복 제어문: `break`, `continue`

중첩 반복문에서도 당연히 반복 제어문인 `break`, `continue`를 사용할 수 있다. 하지만 `break`와 `continue`는 해당 구문의 가장 가까운 반복문에만 영향을 준다.

#### 예시: 회의실 좌석 점검

```c
int broken;

for (int floor = 0; floor < 3; ++floor) {
    printf("[%d층 좌석 점검 시작]\n", floor + 1);

    for (int seat = 0; seat < 5; ++seat) {
        printf("%d층 %d번 좌석 상태 (0=정상, 1=고장): ", floor + 1, seat + 1);
        scanf("%d", &broken);

        if (broken == 1) {
            printf("→ 고장 발견! %d층 점검 종료\n\n", floor + 1);
            break; // 안쪽 for(좌석 반복)만 종료, 다음 층으로 이동
        }

        printf("%d층 %d번 좌석 이상 없음\n", floor + 1, seat + 1);
    }
}
```

#### 예시: 식당 테이블 청소

```c
int occupied;

for (int area = 0; area < 3; ++area) {
    printf("[%d구역 테이블 청소 시작]\n", area + 1);

    for (int table = 0; table < 4; ++table) {
        printf("%d구역 %d번 테이블 상태 (0=빈 자리, 1=손님 있음): ", area + 1, table + 1);
        scanf("%d", &occupied);

        if (occupied == 1) {
            printf("→ 손님 있음, 청소 건너뜀\n");
            continue; // 안쪽 for문(테이블 반복)에서 현재 테이블만 건너뜀
        }

        printf("%d구역 %d번 테이블 청소 완료\n", area + 1, table + 1);
    }
}
```

간단한 이중 반복문을 `break`, `continue`문을 포함하여 작성한 후 위의 동작 시뮬레이션 예시처럼 하나하나 조건을 따져가며 반복문의 동작 상태를 추적하는 훈련을 해보는 것이 반복문, 중첩 반복문을 이해하는 데 큰 도움이 될 것이다.

## Tip

### 1. 반복문 선택 기준

- while 문: 반복 횟수를 알 수 없고, 실행 중에 조건이 정해지는 경우  
  → 예: 사용자 입력을 검사해서 종료할지 결정할 때

- do-while 문: 최소 한 번은 실행되어야 하는 경우  
  → 예: 메뉴를 한 번은 보여주고 종료 조건을 확인할 때

- for 문: 반복 횟수가 명확할 때  
  → 예: 5번 반복, 10명 입력 받기 등
 
> 반복 횟수를 실행 전에 알고 있다면 `for` 문을, 반복 횟수를 특정할 수 없는 경우에는 `while` 또는 `do-while` 문을 사용하는 것이 가독성과 유지보수 측면에서 유리하다.

### 2. 초기식을 0으로 선언
컴퓨터공학에서는 일반적으로 숫자를 0부터 세는 것이 유리하다.  
특히 반복문의 변수 초기값을 0으로 설정하면, 이후 배울 배열의 인덱스(0부터 시작)와 직접적으로 대응되어 혼동을 줄일 수 있다.

따라서 반복문 작성 시 변수의 초기값을 0으로 두는 습관을 들이면 가독성과 유지보수 측면에서 유리하다.

## 자주 하는 실수들

- 반복 조건을 잘못 작성하여 의도치 않게 무한 루프에 빠짐
- 변수 증가·감소를 누락해 반복이 끝나지 않음
- `break`와 `continue`의 동작을 혼동해 흐름 제어가 잘못됨

## 정리

- 반복문은 조건에 따라 코드를 여러 번 실행한다.
- 반복 횟수가 명확하면 `for`문, 조건 중심이면 `while`문, 최소 한 번 실행이 필요하면 `do-while`문을 사용하는 것이 일반적이다.
- `break`는 반복문을 즉시 종료하고 `continue`는 현재 반복을 건너뛰고 다음 반복으로 넘어간다.
- 중첩 반복문은 2차원 배열이나 표 형태의 데이터를 다룰 때 유용하지만 흐름 제어를 정확히 이해해야 한다.