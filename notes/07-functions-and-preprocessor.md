# 7. 함수(Function)와 전처리 지시문(Preprocessor Directives)

## 함수란?

함수(Function) 는 하나의 작업 단위를 정의한 코드 블록이다.  
우리가 지금까지 사용한 `printf()`, `scanf()`도 사실은 C언어 라이브러리 안에 이미 만들어져 있는 함수였다.  
이번에는 우리가 직접 새로운 함수를 만들어서 사용하는 방법을 배운다.

함수를 사용하면 다음과 같은 장점이 있다:

- 같은 코드를 여러 번 복사하지 않고도 재사용 가능
- 프로그램의 흐름이 더 잘 보이고 구조가 명확해짐
- 코드의 가독성과 유지보수성이 좋아짐

## 함수의 기본 구조

```c
반환형 함수이름(매개변수 목록)
{
    // 수행할 작업
    return 결과값;
}
```

| 요소      | 설명                                       |
| --------- | ------------------------------------------ |
| 반환형    | 함수가 계산하고 되돌려주는 결과값의 자료형 |
| 함수 이름 | 호출할 때 사용할 함수의 이름               |
| 매개변수  | 함수에 전달할 입력값(변수)                 |
| 함수 몸체 | 실제 동작을 수행하는 코드 블록             |

## 예시: 두 수를 더하는 함수

```c
int add(int a, int b)
{
    return a + b;
}
```

### 함수 호출:

```c
int result = add(3, 5);  // result에 8이 저장됨
```

> `add(3, 5)`라고 함수를 부르면, `a`에는 3, `b`에는 5가 복사되어 전달된다.  
> 함수 내부에서 `a`, `b`를 바꿔도 원래 값은 바뀌지 않는다.  

## 함수 매개변수는 복사(copy)된다

C언어에서 함수의 매개변수는 값이 복사되어 전달된다.  
즉, 함수 내부에서 매개변수를 수정해도 원래 변수에는 아무 영향이 없다.

### 예시:

```c
void set_zero(int value)
{
    value = 0;
}

int main(void)
{
    int num = 10;
    set_zero(num);
    printf("%d\n", num);  // 출력: 10
    return 0;
}
```

- `set_zero(num)` 호출 시 `value = 10`이지만, `value`는 num의 복사본
- 함수 안에서 `value = 0`으로 바꿔도 `main()`의 `num`은 변하지 않는다

> 즉, 매개변수는 원본이 아닌 복사본을 받는다.

## `void` 함수와 반환값이 있는 함수

- `int`, `float` 등: 결과값을 계산해서 `return`으로 돌려주는 함수
- `void`: 아무 값도 돌려주지 않고 동작만 수행하는 함수

```c
void say_hello(void)
{
    printf("Hello, World!\n");
}
```

### 사용 예:

```c
say_hello();  // 출력: Hello, World!
```

## 함수 선언과 정의

함수를 직접 구현하고 사용하려면 먼저 관련 용어들의 의미를 정확히 이해해야 한다.

| 용어                             | 설명                                                                       |
| -------------------------------- | -------------------------------------------------------------------------- |
| 함수 원형 (Function Prototype)   | 반환형 + 함수 이름 + 매개변수 목록으로 구성된 함수의 구조적인 형태         |
| 함수 선언 (Function Declaration) | 함수 원형을 코드 상에 작성하여 컴파일러에게 해당 함수의 존재를 알리는 문장 |
| 함수 정의 (Function Definition)  | 함수 원형에 구현부(body) 까지 포함하여 실제로 동작하도록 만든 것           |

## 📌 예시

```c
// 함수 선언 (함수 원형을 선언문으로 작성)
int add(int a, int b);

int main(void)
{
    int sum = add(2, 3);
    printf("%d", sum);
    return 0;
}

// 함수 정의 (원형 + 구현부)
int add(int a, int b)
{
    return a + b;
}
```

> 💡 함수 선언은 보통 헤더 파일(.h) 에 작성하고, 함수 정의는 소스 파일(.c) 에 작성하는 것이 일반적인 관례이다.

```c
// example.h
#ifndef EXAMPLE_H
#define EXAMPLE_H

int add(int a, int b);

#endif /* EXAMPLE_H */

// example.c
#include "example.h"

int add(int a, int b)
{
    return a + b;
}

/// main.c
#include <stdio.h>
#include "example.h"

int main(void)
{
    int sum = add(2, 3);
    printf("%d\n", sum);
    return 0;
}
```

# 전처리 지시문 (Preprocessor Directives)

전처리 지시문은 C언어 프로그램을 컴파일하기 전에 미리 처리되는 명령이다.  
항상 `#`으로 시작하며, 소스코드를 확장하거나 정리하는 데 사용된다.

## `#include`: 코드 복붙

```c
#include <stdio.h>
```

- `stdio.h` 파일의 내용을 그 자리에 복사해서 붙여 넣는다
- 즉, `#include`는 “해당 파일의 코드를 이 자리에 삽입하세요”라는 의미다

### 표준 라이브러리와 사용자 정의 파일

| 형태                    | 의미                              |
| ----------------------- | --------------------------------- |
| `#include <stdio.h>`    | 표준 라이브러리에서 제공하는 헤더 |
| `#include "myheader.h"` | 내가 만든 헤더 파일을 포함        |

## `#define`: 이름 붙인 상수

```c
#define PI (3.14159)
#define MAX_COUNT (100)
```

- `PI`를 쓸 때마다 자동으로 `(3.14159)`로 바뀐다
- 코드에서 숫자를 직접 쓰지 않고 이름을 붙여서 관리할 수 있다

> 연산 우선순위 오류를 막기 위해 괄호로 감싸는 습관을 들이자

## 조건부 컴파일: `#ifndef`, `#define`, `#endif`

C언어에서 헤더파일을 여러 번 포함하면 중복 선언 에러가 날 수 있다.  
이를 방지하기 위해 조건부 컴파일을 사용한다.

### 예시:

```c
#ifndef MY_HEADER_H
#define MY_HEADER_H

// 이 안의 내용은 한 번만 포함됨

#endif /* MY_HEADER_H */
```

| 지시문 | 의미 |
|--------|------|
| `#ifndef` | "MY_HEADER_H"가 아직 정의되지 않았으면 실행 |
| `#define` | 이제부터 "MY_HEADER_H"는 정의된 걸로 처리 |
| `#endif` | 조건부 코드의 끝(주석까지 적어주는것이 일반적인 관습) |

### 왜 필요한가?

- 같은 헤더를 여러 파일에서 `#include` 할 수 있다
- 중복된 내용이 다시 정의되지 않도록 차단해준다

## 전처리 지시문 정리표

| 지시문 | 설명 | 예시 |
|--------|------|------|
| `#include` | 다른 파일의 내용을 복사해서 포함 | `#include <stdio.h>` |
| `#define` | 이름 붙은 상수 정의 | `#define PI (3.14)` |
| `#ifndef` / `#define` / `#endif` | 조건부 컴파일 | 헤더 중복 방지 |

## 자주 하는 실수들

- 함수에 `return`을 빼먹거나 잘못된 값을 반환함
- `#include`를 빼먹어 `printf()` 사용 시 오류 발생
- `#define` 상수에 괄호 안 씌워 이상한 계산 결과 발생
- 헤더 중복 방지 매크로(`#ifndef`)를 안 써서 중복 정의 에러 발생

## 정리

* 함수는 코드의 재사용성과 구조화를 돕는다.
* 매개변수는 값이 복사되어 전달되며, 원본은 바뀌지 않는다.
* `void`는 반환값 없는 함수에 사용된다.
* `#include`, `#define`, `#ifndef` 등 전처리 지시문은 컴파일 전에 처리된다.
* 헤더 파일 중복 포함을 방지하려면 조건부 컴파일을 사용해야 한다.